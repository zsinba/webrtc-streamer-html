<html lang="en">
<head>
<script src="libs/strophe.min.js" ></script>
<script src="libs/strophe.muc.min.js" ></script>
<script src="libs/strophe.disco.min.js" ></script>
<script src="libs/strophe.jingle.sdp.js"></script>
<script src="libs/jquery-3.5.1.min.js"></script>
<script src="libs/EventEmitter.min.js" ></script>
    <script src="srs/srs.sdk.js"></script>
<script src="myxmppvideoroom.js" ></script>
    <title>Test Webrtc</title>
</head>
<body></body>
<script>

    var xmppRoomConfig = {
        url: "m.yuanjinapp.com",
        roomId: "testroom"
    };

    var webrtcConfig = {
        url: "",
        options: "rtptransport=udp&timeout=60",
        layoutextraoptions: "&width=320&height=0",
        defaultvideostream: "Bunny"
    };

    function writeStatus(name, status) {
		var textNode = document.createElement("h3");
		textNode.innerHTML = name + " " + status;
		document.body.appendChild(textNode);
	}
    SrsRtcPlayerAsync().play()
	let bus = new EventEmitter()
	bus.addListener('state', writeStatus)
	let xmpp = new XMPPVideoRoom(xmppRoomConfig.url, bus)
    xmpp.join(xmppRoomConfig.roomId, "Bunny")

	window.onbeforeunload = function() {
			xmpp.leave();
	};
</script>
</html>

